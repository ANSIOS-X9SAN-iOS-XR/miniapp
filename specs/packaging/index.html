<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MiniApp Packaging</title>

    <style>
    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    table {
      border-collapse:collapse;
    }

    table,th, td {
      border: 1px solid #666;
    }

    td {
      padding:2px 15px;
    }
    </style>

    <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c-common"></script>

    <script class="remove">
        var respecConfig = {
            specStatus: "CG-DRAFT",
            copyrightStart: "2020",
            edDraftURI: "https://w3c.github.io/miniapp/specs/packaging/",

            shortName: "miniapp-packaging",

            editors: [{
                name: "Qing An",
                companyURL: "http://www.alibabagroup.com/en/global/home",
                company: "Alibaba"
              }, {
                name: "Shouren Lan",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
                name: "Zhiqiang Yu",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
                name: "Tengyuan Zhang",
                companyURL: "https://www.baidu.com/",
                company: "Baidu, Inc"
              }, {
                name: "Qian Liu",
                companyURL: "https://www.baidu.com/",
                company: "Baidu, Inc"
              }, {
                name: "Shuo Wang",
                companyURL: "https://www.baidu.com/",
                company: "Baidu, Inc"
              }, {
                name: "Dan Zhou",
                companyURL: "https://www.baidu.com/",
                company: "Baidu, Inc"
              }],

            wg: "MiniApps Ecosystem Community Group",
            wgURI: "https://www.w3.org/community/miniapps/",
            github: "w3c/miniapp",
        };
    </script>
</head>

<body>
    <section id='abstract'>
        <p its-locale-filter-list="en" lang="en">
          This specification defines the standardized miniapp packaging construction method, which provides a standard package structure description. The Miniapp package file packages all the static page templates / CSS / JavaScript files and manifest file. Miniapp package file can be used in any runtime environment (user agent).
        </p>
        <p its-locale-filter-list="zh-hans" lang="zh-hans">
          本文描述了一个标准化的MiniApp包构建方式，提供一种标准的包结构描述，将小程序页面所需的所有静态页面模板 /CSS/JavaScript 文件，和配置文件（Manifest）打包在一起，允许在任何运行时环境可使用。
        </p>
        <p its-locale-filter-list="en" lang="en">
          The Miniapp package file contains a manifest document (located in the root directory of the package). The manifest file included an overview of the Miniapp resource. Including page description and page path. package file contains JavaScript code, one or more page files, including template code of page, CSS code of page style and JavaScript code of page logic. The Miniapp package file should support digital signature verification.
        </p>
        <p its-locale-filter-list="zh-hans" lang="zh-hans">
          小程序包资源，包含一个配置文档，位于包的根目录下。配置文件应包括整个小程序的概述（页面描述及其对应路径，用于页面定位和开启）。包含 JavaScript 代码的应用级逻辑文件，一个或多个页面文件，包含页面结构的模板代码、页面样式的 CSS 代码和页面逻辑的 JavaScript 代码。小程序包应支持数字签名验证。
        </p>
        <p its-locale-filter-list="en" lang="en">
          The Miniapp runtime environment (user agent), which can identify Miniapp package files through standard package format and MIME media type. After fetching the Miniapp package file, all static page templates / CSS / JavaScript files are cached on the device through standardized dereference. These cache package resources are available until the next update without fetching the miniapp package file again. In terms of launch  mode, the Miniapp can launch in normally without network. The runtime environment (user agent) locates the specified startup page from the package cache path and starts the Miniapp according to the description of the manifest file.
        </p>
        <p its-locale-filter-list="zh-hans" lang="zh-hans">
          小程序运行时环境，可通过标准的文件格式、媒体类型识别小程序包文件。获取（Fetch）小程序包后，通过标准化的解引用，将所有静态页面模板 /CSS/JavaScript 文件缓存在设备上。在下次更新之前，这些资源始终可用，无需重新获取（Fetch）小程序包文件。启动方式上，小程序无需网络也可以正常启动，运行时环境根据小程序标准配置文件的描述(minifest)，从包缓存路径中定位指定的启动页面，启动小程序。
        </p>
    </section>
    
    <section id='sotd'>
        <p>
        This is still a work in progress. The proposal is being incubated in the <a href="https://www.w3.org/community/miniapps/">W3C MiniApps Ecosystem Community Group</a>.
        </p>
    </section>
    
    <section>
        <h2>Packaging</h2>
        <p>MiniApp has one app config file to globally describe and configure MiniApp. It is responsible for all MiniApp pages and global data, as well as the management of MiniApp lifecycle.
        </p>
        
        <p>MiniApp contains multiple pages files.</p>
        
        <p>One common illustration example as following:</p>
        
        <pre class="example">
                |___app
                |     |___manifest.json
                |     |___app.js
                |     |___app.css
                |     |___pages
                |     |       |___page.js
                |     |       |___page.xml
                |     |       |___page.json
                |     |       |___page.css
                |     |___common
                |     |       |___component.js
                |     |       |___component.xml
                |     |       |___component.css
                |     |       |___component.json
                |     |       |___example.png
        
        </pre>
        
        <h2>app</h2>
        <p>app manages all MiniApp pages and global data, as well as MiniApp’s lifecycle management. It contains logic (app.js), configuration (manifest.json) and css (app.css).
        </p>
        
        <ul>
          <li>manifest.json is responsible for global configuration of MiniApp, including: file path of MiniApp pages, window configuration (such as navigator bar, background image and color, page title, etc.) and Tab Bar configuration.</li>
          <li>app.css is responsible for global css for all MiniApp pages.</li>
          <li>app.js is responsible for MiniApp lifecycle management, like launch Mini App, show Mini App, hide Mini App.</li>
        </ul>
        
        <h2>page</h2>
        <p>page represents each of MiniApp pages, responsible for MiniApp page display and user interaction. It contains logic (page.js), configuration (page.json), structure (page.xml) and css (page.css).
        </p>
        
        <ul>
          <li>page.json is responsible for configuration of each MiniApp page.</li>
          <li>page.xml is responsible for the structure of each MiniApp page, similar to HTML.</li>
          <li>page.css is responsible for CSS for each MiniApp page.</li>
          <li>page.js is responsible for MiniApp page lifecycle management, defined in <a href="https://w3c.github.io/miniapp/specs/lifecycle/">MiniApp Lifecycle</a></li>
        </ul>
        
        <h2>common</h2>
        <p>It can include public resources such as components, resources, and utils, which are used to store custom components, multimedia resources, and js files.</p>
        
    </section>

</body>

</html>
