<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>MiniApp Packaging</title>

    <style>
    .two-cols {
      display: grid;
      grid-template-columns: 1fr 1fr;
    }

    table {
      border-collapse:collapse;
    }

    table,th, td {
      border: 1px solid #666;
    }

    td {
      padding:2px 15px;
    }
    </style>

    <script async class="remove" src="https://www.w3.org/Tools/respec/respec-w3c-common"></script>

    <script class="remove">
        var respecConfig = {
            specStatus: "CG-DRAFT",
            copyrightStart: "2020",
            edDraftURI: "https://w3c.github.io/miniapp/specs/packaging/",

            shortName: "miniapp-packaging",

            editors: [{
                name: "Qing An",
                companyURL: "http://www.alibabagroup.com/en/global/home",
                company: "Alibaba"
              }, {
                name: "Shouren Lan",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
                name: "Zhiqiang Yu",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }, {
                name: "Yongjing Zhang",
                companyURL: "http://www.huawei.com/",
                company: "Huawei"
              }],

            wg: "MiniApps Ecosystem Community Group",
            wgURI: "https://www.w3.org/community/miniapps/",
            github: "w3c/miniapp",
        };
    </script>
</head>

<body>
    <section id='abstract'>
        <p>
            This document specifies a standardized MiniApp packaging constructor to describe MiniApp package uniformly. This provides a standard description of the package structure and the package construction methods that can be used in any MiniApp runtime environment.
        </p>
        <p>
            For example, by configuring the package resource's description file, developers can determine the path to start the MiniApp. The MiniApp runtime environment searches for the specified path resource from the description file, and launches the specified page of the MiniApp. The installation of the MiniApp package is simpler than native apps. MiniApp runtime obtains the specified package resource through network request or local package file during the MiniApp's first run and caches the MiniApp package locally. MiniApp runtime will load the package resource file from the local cache while the MiniApp is opened next time.
        </p>
        <p> 
            The MiniApp runtime loads the specified path resource according to the description file from MiniApp package file, and MiniApp can be launched offline. This provides a standard of complete package structure, maintaining offline capabilities and background running capabilities.
        </p>
    </section>
    
    <section id='sotd'>
        <p>
        This is still a work in progress. The proposal is being incubated in the <a href="https://www.w3.org/community/miniapps/">W3C MiniApps Ecosystem Community Group</a>.
        </p>
    </section>
    
    <section>
        <h2>Packaging</h2>
        <p>Each MiniApp package is wrapped as a [[ZIP]] file. It contains, at the root level, a global configration file (<code>manifest.json</code>) to describe and configure the whole MiniApp, an application logic file (<code>app.js</code>), and a default style file (<code>app.css</code>).
        </p>
        
        <p>The MiniApp pacakge also contains multiple page related files in the <code>pages</code> folder, and other common resource files in the <code>common</code> folder </p>
        
        <p>One typical illustrative example of a MiniApp pacakge is as follows:</p>
        
        <pre class="example">
                |___app
                |     |___manifest.json
                |     |___app.js
                |     |___app.css
                |     |___pages
                |     |       |___page1.js
                |     |       |___page1.xml
                |     |       |___page1.json
                |     |       |___page1.css
                |     |___common
                |     |       |___componentA.js
                |     |       |___componentA.xml
                |     |       |___componentA.css
                |     |       |___componentA.json
                |     |       |___example.png
        
        </pre>
        
        <h2>app</h2>
        <p class="ednote">Whether this 'app' root folder is need is ffs.</p>
            <p>
                The MiniApp packge contains at the root level the global data and lifecycle management of the MiniApp in the form of the following files:
            </p>
        
        <ul>
          <li><code>manifest.json</code> is responsible for the global configuration of the MiniApp, such as the file paths of MiniApp pages and the window configuration (e.g. navigator bar, background image and color, page title, etc.). Details are specified in the <a href="../manifest/index.html">Manifest specification</a></li>
          <li><code>app.css</code> is responsible for the global CSS style for all MiniApp pages.</li>
          <li><code>app.js</code> is responsible for the MiniApp lifecycle management, such as launching, showing and hiding the MiniApp.</li>
        </ul>
        
        <h2>pages</h2>
        <p>
            The <code>pages</code> folder contains sets of files for the display and user interaction of all MiniApp pages. Each set of files that shares the same base file name (e.g. 'page1') with different extension names describe a particular page on different aspects, such as the service logic (e.g. page1.js), the configuration (e.g. page1.json), the structure (e.g. page1.xml) and the style (e.g page1.css). Developers can choose to put all page files directly under the <code>pages</code> folder in a flat manner, or organize them in different sub-folders for different pages.
        </p>
        
        <ul>
          <li>A <code>.json</code> file is responsible for the configuration of a MiniApp page.</li>
          <li>A <code>.xml</code> file is responsible for the structure of a MiniApp page, similar to HTML.</li>
          <li>A <code>.css</code> file is responsible for the CSS style of a MiniApp page.</li>
          <li>A <code>.js</code> file is responsible for the service logic and lifecycle management (defined in <a href="https://w3c.github.io/miniapp/specs/lifecycle/">MiniApp Lifecycle</a>) of a MiniApp page.</li>
        </ul>
        
        <h2>common</h2>
        <p>The <code>common</code> folder contains common resources such as components, multimedia resources, and utils (js files). Developers can choose to put all resource files directly under the <code>common</code> folder in a flat manner, or organize them in different sub-folders as needed.</p>
        
    </section>

</body>

</html>
